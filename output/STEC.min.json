{"handlers":[{"filter":{"slotKey":"-1","signature":"start()","args":[]},"code":"keybindPresets[\"maneuver\"]=KeybindController()keybindPresets[\"maneuver\"].Init=function()\nend\nkeybindPresets[\"maneuver\"].keyDown.up.Add(function()\nship.direction.z=1 end)\nkeybindPresets[\"maneuver\"].keyUp.up.Add(function()\nship.direction.z=0 end)\nkeybindPresets[\"maneuver\"].keyDown.down.Add(function()ship.direction.z=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.down.Add(function()\nship.direction.z=0 end)\nkeybindPresets[\"maneuver\"].keyDown.left.Add(function()ship.direction.x=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.left.Add(function()\nship.direction.x=0 end)\nkeybindPresets[\"maneuver\"].keyDown.right.Add(function()\nship.direction.x=1 end)\nkeybindPresets[\"maneuver\"].keyUp.right.Add(function()\nship.direction.x=0 end)\nkeybindPresets[\"maneuver\"].keyDown.forward.Add(function()\nship.direction.y=1 end)\nkeybindPresets[\"maneuver\"].keyUp.forward.Add(function()\nship.direction.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.backward.Add(function()ship.direction.y=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.backward.Add(function()\nship.direction.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.yawleft.Add(function()ship.rotation.y=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.yawleft.Add(function()\nship.rotation.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.yawright.Add(function()\nship.rotation.y=1 end)\nkeybindPresets[\"maneuver\"].keyUp.yawright.Add(function()\nship.rotation.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.brake.Add(function()\nship.brake=true end)\nkeybindPresets[\"maneuver\"].keyUp.brake.Add(function()\nship.brake=false end)\nkeybindPresets[\"maneuver\"].keyDown.stopengines.Add(function()\nif\nnot SHUD.Enabled then mouse.unlock()mouse.enabled=false end end,\"Free Look\")\nkeybindPresets[\"maneuver\"].keyUp.stopengines.Add(function()\nSHUD.Select()\nif not SHUD.Enabled then mouse.lock()mouse.enabled=true end end)\nkeybindPresets[\"maneuver\"].keyUp.speedup.Add(function()SHUD.Enabled=\nnot SHUD.Enabled end)\nkeybindPresets[\"maneuver\"].keyUp.speeddown.Add(function()if\nmouse.enabled then mouse.unlock()mouse.enabled=false else mouse.lock()\nmouse.enabled=true end end,\"Mouse Steering\")keybindPreset=\"maneuver\"\nSHUD.Init(system,unit,keybindPresets[keybindPreset])\nTask(function()coroutine.yield()SHUD.FreezeUpdate=true\nlocal QDmk=system.getTime()+2\nwhile system.getTime()<QDmk do coroutine.yield()end;SHUD.FreezeUpdate=false;SHUD.IntroPassed=true end)\nSHUD.Markers={{Position=function()return ship.world.position+\n(ship.target.prograde()*2)end,Class=\"prograde\"},{Position=function()return\n\nship.world.position+ (ship.target.retrograde()*2)end,Class=\"retrograde\"},{Position=function()\nreturn\nship.world.position+ (ship.target.radial()*2)end,Class=\"radial\"},{Position=function()return\n\nship.world.position+ (ship.target.antiradial()*2)end,Class=\"antiradial\"},{Position=vec3(\n-15973,106446,-60333),Class=\"target\",Name=\"Shadow Templar HQ\",ShowDistance=true}}ship.throttle=0.2;","key":1},{"filter":{"slotKey":"-1","signature":"stop()","args":[]},"code":"system.showScreen(0)","key":2},{"filter":{"slotKey":"-2","signature":"actionStart(action)","args":[{"variable":"*"}]},"code":"\nkeybindPresets[keybindPreset].Call(action,\"down\")","key":3},{"filter":{"slotKey":"-2","signature":"actionStop(action)","args":[{"variable":"*"}]},"code":"\nkeybindPresets[keybindPreset].Call(action,\"up\")","key":4},{"filter":{"slotKey":"-2","signature":"actionLoop(action)","args":[{"variable":"*"}]},"code":"\nkeybindPresets[keybindPreset].Call(action,\"loop\")","key":5},{"filter":{"slotKey":"-2","signature":"flush()","args":[]},"code":"if mouse then mouse.apply()ship.apply()end","key":6},{"filter":{"slotKey":"-1","signature":"tick(timerId)","args":[{"value":"HUD"}]},"code":"if SHUD then SHUD.Render()end","key":7},{"filter":{"slotKey":"-2","signature":"update()","args":[]},"code":"if SHUD then SHUD.Update()end","key":8},{"filter":{"slotKey":"-3","signature":"start()","args":[]},"code":"\nfunction DynamicDocument(M4_)local h2={}h2.template=M4_ or\"\"local kZQU=\"\"local Z={}h2.tree={}\nlocal PeOQQN={br=true,hr=true,img=true,embed=true,param=true,area=true,col=true,input=true,meta=true,link=true,base=true,basefont=true,iframe=true,isindex=true,circle=true,polygon=true,line=true,rect=true,use=true}function table.indexOf(umiZ3,j6oPrH)\nfor xb,z0hMKZ in ipairs(j6oPrH)do if z0hMKZ==umiZ3 then return xb end end;return nil end\nfunction h2.makeFunc(z)\nlocal X=\"nil\"\nif Z[z]==nil then\nlocal l,QLLka1=pcall(load(\"return function() return \"..z..\" end\",nil,\"t\",_ENV))if l then Z[z]=QLLka1;X=QLLka1()\nif type(X)==\"function\"then Z[z]=QLLka1()X=X()end end else X=Z[z]()end;return X end\nlocal function ejjA(M4_)local jGc=0;local N7c={}local UNcj={}UNcj.dd={}table.insert(N7c,UNcj)local yPH={}\nfor Vi0vV,PuRz,q,n,vZwY9,l,xkDS_,M in\nstring.gmatch(M4_,\"(<)(%/?!?)([%w:_-'\\\\\\\"%[]+)(.-)(%/?%-?)>([%s\\r\\n\\t]*)([^<]*)([%s\\r\\n\\t]*)\")do q=string.lower(q)\nif PuRz==\"/\"then if jGc==0 then return UNcj end;jGc=jGc-1\ntable.remove(N7c)else\nlocal function qMLla(gyOB1)local WswI=\"dd-\"return gyOB1:sub(1,#WswI)==WswI end;jGc=jGc+1;yPH={}yPH.name=q;yPH.children={}yPH.attr={}\nif N7c[jGc-1]then yPH.parent=N7c[\njGc-1][#N7c[jGc-1]]else yPH.parent=nil end\nif n~=\"\"then\nfor npVrN1,KL9 in string.gmatch(n,\"%s([^%s=]+)=\\\"([^\\\"]+)\\\"\")do\nyPH.attr[npVrN1]=string.gsub(KL9,'\"','[^\\\\]\\\\\"')\nif qMLla(npVrN1)then\nif not UNcj.dd[npVrN1]then UNcj.dd[npVrN1]={}end;table.insert(UNcj.dd[npVrN1],yPH)end end\nfor JlDv1,C4W0 in string.gmatch(n,\"%s([^%s=]+)='([^']+)'\")do\nyPH.attr[JlDv1]=string.gsub(C4W0,'\"','[^\\\\]\\\\\"')\nif qMLla(JlDv1)then\nif not UNcj.dd[JlDv1]then UNcj.dd[JlDv1]={}end;table.insert(UNcj.dd[JlDv1],yPH)end end end;if not N7c[jGc]then N7c[jGc]={}end\ntable.insert(N7c[jGc],yPH)\nif PeOQQN[q]then if xkDS_~=\"\"then\ntable.insert(N7c[jGc],{name=\"textNode\",value=xkDS_})end;yPH.children={}jGc=jGc-1 else if xkDS_~=\"\"then\ntable.insert(yPH.children,{name=\"textNode\",value=xkDS_})end\ntable.insert(N7c,yPH.children)end end end;return UNcj end\nlocal function pVR(y,e1)local iD1O={y}local UX7LC=\"\"\nlocal function I1zjv(G)local Q=0;for sGIpQI in pairs(G)do Q=Q+1 end;return Q end\nif not e1 and I1zjv(y.dd)>0 then\nif y.dd[\"dd-repeat\"]then\nfor NapYw=#y.dd[\"dd-repeat\"],1,\n-1 do local AZwHk=y.dd[\"dd-repeat\"][NapYw]\nvar,array=string.match(AZwHk.attr[\"dd-repeat\"],\"(.*) in (.*)\")AZwHk.attr[\"dd-repeat\"]=nil;local eAu8=pVR({AZwHk},true)\nlocal kDCS0e=string.gmatch(eAu8,\"{{([^}}]+)}}\")local _={}for BE4ZHb in kDCS0e do\nif string.match(BE4ZHb,var)then table.insert(_,BE4ZHb)end end;local kZQU=\"\"\nlocal i=h2.makeFunc(array)\nfor NapYw=1,#i do _ENV[var]=i[NapYw]local Vg=eAu8\nlocal urj=ejjA(Vg:gsub(\"^%s*(.-)%s*$\",\"%1\"))kZQU=kZQU..pVR(urj)end;AZwHk.children={}AZwHk.name=\"textNode\"AZwHk.value=kZQU end end\nif y.dd[\"dd-if\"]then\nfor o_hxlN=#y.dd[\"dd-if\"],1,-1 do\nlocal Ap5JD=y.dd[\"dd-if\"][o_hxlN]local ukVuY=h2.makeFunc(Ap5JD.attr[\"dd-if\"])\nif ukVuY then Ap5JD.attr[\"dd-if\"]=\nnil else\nlocal hham=table.indexOf(Ap5JD,Ap5JD.parent.children)\nif hham then table.remove(Ap5JD.parent.children,hham)end;Ap5JD=nil;table.remove(y.dd[\"dd-if\"],o_hxlN)y.dd[\"dd-if\"][o_hxlN]=\nnil end end end\nif y.dd[\"dd-init\"]then\nfor O35h=#y.dd[\"dd-init\"],1,-1 do\nlocal j=y.dd[\"dd-init\"][O35h]\npcall(load(j.attr[\"dd-init\"],nil,\"t\",_ENV))j.attr[\"dd-init\"]=nil end end end\nwhile#iD1O~=0 do node=iD1O[#iD1O][1]if not node then break end\nif\nnode.name==\"textNode\"then local pXlXSI=node.value:gsub(\"^%s*(.-)%s*$\",\"%1\")if not e1 then\npXlXSI=h2.transformClosures(pXlXSI)end;UX7LC=UX7LC..pXlXSI else UX7LC=UX7LC..\"\\n\"..\nstring.rep(\" \",#iD1O-1)\nUX7LC=UX7LC..\"<\"..node.name\nif node.attr then\nfor xcACYY,opeqZ in pairs(node.attr)do\nif not e1 then\nxcACYY=h2.transformClosures(xcACYY)opeqZ=h2.transformClosures(opeqZ)end\nUX7LC=UX7LC..\" \"..xcACYY..'=\"'..opeqZ..'\"'end end\nif PeOQQN[node.name]then UX7LC=UX7LC..\"/>\"else UX7LC=UX7LC..\">\"end end\nif node.children and#node.children>0 then\ntable.insert(iD1O,node.children)else table.remove(iD1O[#iD1O],1)\nif\n\nnode.children and\n#node.children==0 and not PeOQQN[node.name]and not node.name==\"textNode\"then UX7LC=UX7LC..\"</\"..node.name..\">\"end\nwhile#iD1O>0 and#iD1O[#iD1O]==0 do\ntable.remove(iD1O)\nif#iD1O>0 then\nif#iD1O[#iD1O][1].children>1 then\nUX7LC=UX7LC..\"\\n\"..string.rep(\" \",\n#iD1O-1)..\n\"</\"..iD1O[#iD1O][1].name..\">\"else\nUX7LC=UX7LC..\"</\"..iD1O[#iD1O][1].name..\">\"end;table.remove(iD1O[#iD1O],1)end end end end;return UX7LC:match\"^%s*(.-)%s*$\"end\nfunction h2.transformClosures(NACc)local K83xZ={}\nlocal n=string.gmatch(NACc,\"{{([^}}]+)}}\")for Rij8Y in n do table.insert(K83xZ,Rij8Y)end\nif#K83xZ>0 then for xCIu=1,#K83xZ\ndo local D6=K83xZ[xCIu]val=h2.makeFunc(D6)\nNACc=string.gsub(NACc,h2.literalize(\"{{\"..\nD6 ..\"}}\"),tostring(val))end end;return NACc end\nfunction h2.literalize(rIuN)return\nrIuN:gsub(\"[%(%)%.%%%+%-%*%?%[%]%^%$]\",function(qiNao)return\"%\"..qiNao end)end;function h2.Read()return pVR(ejjA(h2.template))end\nreturn h2 end\nfunction TagManager(uQz)self={}local Y2yv={}local qnp=\"\"\nlocal function ZgSNOc(nWCR,o)if(nWCR=='')then return false end\nlocal zjx2QO,kGRA=0,{}\nfor iXB,pmohm in\nfunction()return string.find(o,nWCR,zjx2QO,true)end do\ntable.insert(kGRA,string.sub(o,zjx2QO,iXB-1))zjx2QO=pmohm+1 end;table.insert(kGRA,string.sub(o,zjx2QO))\nreturn kGRA end;function self.tagsToString()\nif#Y2yv==0 then qnp=\"all\"else qnp=table.concat(Y2yv,\",\")end end\nfunction self.Remove(v)if type(v)~=\"string\"then\nerror(\"[TagManager] Unable to remove a tag - Not a string\")end;for iJP,z in pairs(Y2yv)do if v==z then\ntable.remove(Y2yv,iJP)end end\nself.tagsToString()end\nfunction self.Add(VZpH)if type(VZpH)~=\"string\"then\nerror(\"[TagManager] Unable to add a tag - Not a string\")end;for K,s in pairs(Y2yv)do\nif VZpH==s then return end end;table.insert(Y2yv,VZpH)\nself.tagsToString()end;if(uQz~=nil and type(uQz)==\"string\")then for H4nch,ZH2HJp in\npairs(ZgSNOc(\",\",uQz))do self.Add(ZH2HJp)end else\nself.Add(\"all\")end\nsetmetatable(self,{__tostring=function(_)\nreturn qnp end})return self end\nfunction Keybind(RwUK)local cP={}cP.Key=RwUK;local IYERC5={}\nfunction cP.Add(C71,eaMKQo)if type(C71)~=\"function\"then\nerror(\"[Keybind] Unable to add callback - not a function\")end\ntable.insert(IYERC5,{Function=C71,Name=eaMKQo})end\nfunction cP.Remove(nJk)if type(nJk)~=\"function\"then\nerror(\"[Keybind] Unable to remove callback - not a function\")end;local G7w4Q={}for nnkP,SQq in pairs(IYERC5)do\nG7w4Q[SQq.Function]=nnkP end;for Y2Rm,pmoaP in pairs(G7w4Q)do\nif Y2Rm==nJk then IYERC5[pmoaP]=nil end end end\nfunction cP.GetNames()local lbW3d={}for krRLP9h,JBaGAJ in pairs(IYERC5)do if JBaGAJ.Name then\ntable.insert(lbW3d,JBaGAJ.Name)end end;return\nlbW3d end;function cP.Call()\nfor wI5eYn,Pb3GeQ in pairs(IYERC5)do Pb3GeQ.Function(cP.Key)end end;return cP end\nfunction KeybindController()local h={}\nlocal C0={\"forward\",\"backward\",\"left\",\"right\",\"yawleft\",\"yawright\",\"up\",\"down\",\"gear\",\"light\",\"landing\",\"brake\",\"option1\",\"option2\",\"option3\",\"option4\",\"option5\",\"option6\",\"option7\",\"option8\",\"option9\",\"stopengines\",\"speedup\",\"speeddown\",\"antigravity\",\"booster\"}h.keyUp={}h.keyDown={}h.keyLoop={}\nfunction h.Call(G,i7Dbdd)\nif i7Dbdd==\"up\"then if h.keyUp[G]then\nh.keyUp[G].Call(G)end elseif i7Dbdd==\"down\"then if h.keyDown[G]then\nh.keyDown[G].Call(G)end else\nif h.keyLoop[G]then h.keyDown[G].Call(G)end end end\nfunction h.GetNamedKeybinds()local v6s={}\nfor Olq7,eoKM in pairs(h.keyUp)do local Z=eoKM.GetNames()if#Z>0 then for dY=1,#Z do\ntable.insert(v6s,{Key=eoKM.Key,Name=Z[dY]})end end end\nfor CYDA,ojz in pairs(h.keyDown)do local BM1kD=ojz.GetNames()\nif#BM1kD>0 then for nM0S4l=1,#BM1kD do\ntable.insert(v6s,{Key=ojz.Key,Name=BM1kD[nM0S4l]})end end end\nfor BzEL,G4z in pairs(h.keyLoop)do local jMM5XN=G4z.GetNames()\nif#jMM5XN>0 then for rcc=1,#jMM5XN do\ntable.insert(v6s,{Key=G4z.Key,Name=jMM5XN[rcc]})end end end\ntable.sort(v6s,function(hPDLa,viI)return hPDLa.Key<viI.Key end)return v6s end;h.Init=function()end;local function WD()\nfor vi=1,#C0 do h.keyUp[C0[vi]]=Keybind(C0[vi])\nh.keyDown[C0[vi]]=Keybind(C0[vi])h.keyLoop[C0[vi]]=Keybind(C0[vi])end end\nWD()return h end;keybindPresets={}\nfunction STEC(paU,R,WXz)local IYs={}IYs.core=paU;IYs.control=R\nIYs.world={up=vec3(paU.getConstructWorldOrientationUp()),down=\n-vec3(paU.getConstructWorldOrientationUp()),left=\n-vec3(paU.getConstructWorldOrientationRight()),right=vec3(paU.getConstructWorldOrientationRight()),forward=vec3(paU.getConstructWorldOrientationForward()),back=\n-vec3(paU.getConstructWorldOrientationForward()),velocity=vec3(paU.getWorldVelocity()),acceleration=vec3(paU.getWorldAcceleration()),position=vec3(paU.getConstructWorldPos()),gravity=vec3(paU.getWorldGravity()),atmosphericDensity=R.getAtmosphereDensity()}\nIYs.target={prograde=function()return IYs.world.velocity:normalize()end,retrograde=function()\nreturn\n-IYs.world.velocity:normalize()end,radial=function()\nreturn IYs.world.gravity:normalize()end,antiradial=function()return\n-IYs.world.gravity:normalize()end,normal=function()return\nIYs.world.velocity:normalize():cross(IYs.world.gravity:normalize()):normalize()end,antinormal=function()return\nIYs.world.velocity:normalize():cross(\n-IYs.world.gravity:normalize()):normalize()end}IYs.id=paU.getConstructId()\nIYs.tags=TagManager(\"all,brake\")IYs.targetVector=nil;IYs.targetVectorAutoUnlock=true;IYs.altitude=0\nIYs.mass=IYs.core.getConstructMass()IYs.thrust=vec3(0,0,0)IYs.direction=vec3(0,0,0)\nIYs.rotation=vec3(0,0,0)IYs.rotationSpeed=2;IYs.brakingFactor=10;IYs.angularThrust=vec3(0,0,0)\nIYs.inertialDampening=false;IYs.brake=false;IYs.counterGravity=true;IYs.followGravity=false\nIYs.gravityFollowSpeed=4;IYs.throttle=1;IYs.fMax=0;IYs.altitudeHold=0\nIYs.ignoreVerticalThrottle=false;local ja=system.getTime()\nfunction IYs.updateWorld()\nIYs.world={up=vec3(paU.getConstructWorldOrientationUp()),down=\n-vec3(paU.getConstructWorldOrientationUp()),left=\n-vec3(paU.getConstructWorldOrientationRight()),right=vec3(paU.getConstructWorldOrientationRight()),forward=vec3(paU.getConstructWorldOrientationForward()),back=\n-vec3(paU.getConstructWorldOrientationForward()),velocity=vec3(paU.getWorldVelocity()),acceleration=vec3(paU.getWorldAcceleration()),position=vec3(paU.getConstructWorldPos()),gravity=vec3(paU.getWorldGravity()),atmosphericDensity=R.getAtmosphereDensity()}IYs.mass=IYs.core.getConstructMass()\nIYs.altitude=IYs.core.getAltitude()IYs.localVelocity=vec3(paU.getVelocity())\nlocal ipUp=IYs.core.getMaxKinematicsParameters()\nif IYs.world.atmosphericDensity>0.1 then\nIYs.fMax=math.max(ipUp[1],-ipUp[2])else IYs.fMax=math.max(ipUp[3],-ipUp[4])end end\nfunction IYs.calculateAccelerationForce(Er9xoa,lNE)return IYs.mass* (Er9xoa/lNE)end\nfunction clamp(sR,KGXyQ,BjvM)return math.min(BjvM,math.max(sR,KGXyQ))end\nfunction IYs.throttleUp()IYs.throttle=clamp(IYs.throttle+0.05,0,1)end\nfunction IYs.throttleDown()IYs.throttle=clamp(IYs.throttle-0.05,0,1)end\nfunction IYs.worldToLocal(Z7h0Rl)return\nvec3(library.systemResolution3({IYs.world.right:unpack()},{IYs.world.forward:unpack()},{IYs.world.up:unpack()},{Z7h0Rl:unpack()}))end\nfunction IYs.localToWorld(xXL)xXL={xXL:unpack()}\nlocal WMWW,N7Mxhm,xjYn=IYs.world.right:unpack()local Nkl_,pQK,Lb=IYs.world.forward:unpack()\nlocal XIxg4S,en8D5m,n4gShK=IYs.world.up:unpack()local GnSxy,R2OXl,MDx0Q=xXL:unpack()\nlocal oSYLs=GnSxy*WMWW+R2OXl*Nkl_+MDx0Q*XIxg4S\nlocal zBbH=GnSxy*N7Mxhm+R2OXl*pQK+MDx0Q*en8D5m;local oG=GnSxy*xjYn+R2OXl*Lb+MDx0Q*n4gShK;return\nvec3(oSYLs,zBbH,oG)end\nfunction IYs.apply()\nlocal mW=math.max(system.getTime()-ja,0.001)IYs.updateWorld()local g=IYs.thrust;local E=IYs.angularThrust\nif\nIYs.direction.x~=0 then g=g+\n(((IYs.world.right*IYs.direction.x)*\nIYs.fMax)*IYs.throttle)end\nif IYs.direction.y~=0 then g=g+\n((\n(IYs.world.forward*IYs.direction.y)*IYs.fMax)*IYs.throttle)end\nif IYs.direction.z~=0 then local ZVqq=(\n(IYs.world.up*IYs.direction.z)*IYs.fMax)\nif not\nIYs.ignoreVerticalThrottle then ZVqq=ZVqq*IYs.throttle end;g=g+ZVqq end\nif IYs.rotation.x~=0 then\nE=E+ ((\nIYs.world.forward:cross(IYs.world.up)*IYs.rotation.x)*\nIYs.rotationSpeed)if IYs.targetVectorAutoUnlock then IYs.targetVector=nil end end;if IYs.rotation.y~=0 then\nE=E+ ((\nIYs.world.up:cross(IYs.world.right)*IYs.rotation.y)*\nIYs.rotationSpeed)end\nif\nIYs.rotation.z~=0 then\nE=E+\n(\n(IYs.world.forward:cross(IYs.world.right)*IYs.rotation.z)*IYs.rotationSpeed)if IYs.targetVectorAutoUnlock then IYs.targetVector=nil end end;if IYs.followGravity and IYs.rotation.x==0 then\nE=E+\n(IYs.world.up:cross(-\nIYs.world.gravity:normalize())*IYs.gravityFollowSpeed)end;if\nIYs.altitudeHold~=0 then local YzCd=IYs.altitude-IYs.altitudeHold\ng=g+ (\n(\nIYs.world.gravity:normalize()*YzCd*-1)*IYs.mass*mW)end\nif\nIYs.inertialDampening then local xlRr=IYs.mass*-IYs.localVelocity\nlocal G2y=IYs.direction*IYs.localVelocity\nif G2y.x<=0 then local Yzb2=mW;if\n(math.abs(IYs.localVelocity.x)<1)then Yzb2=0.125 end;g=g+\n(IYs.world.right*xlRr.x)/Yzb2 end\nif G2y.y<=0 then local z2=mW;if\n(math.abs(IYs.localVelocity.y)<1)then z2=0.125 end;g=g+\n(IYs.world.forward*xlRr.y)/z2 end\nif G2y.z<=0 then local o_b35=mW;if\n(math.abs(IYs.localVelocity.z)<1)then o_b35=0.125 end;g=g+\n(IYs.world.up*xlRr.z)/o_b35 end end;if IYs.brake then local vwIV=IYs.world.velocity:len()\ng=-\nIYs.world.velocity*IYs.mass*math.max(IYs.brakingFactor*math.max(1,vwIV*0.5),\nvwIV*vwIV)end\nif\nIYs.targetVector~=nil then\nlocal aSQ=vec3(IYs.world.forward.x,IYs.world.forward.y,IYs.world.forward.z)\nif type(IYs.targetVector)==\"function\"then\naSQ=IYs.targetVector()elseif type(IYs.targetVector)==\"table\"then aSQ=IYs.targetVector end;E=E+\n(IYs.world.forward:cross(aSQ)*IYs.rotationSpeed)end\nif IYs.counterGravity then g=g-IYs.world.gravity*IYs.mass end;g=g/IYs.mass\nIYs.control.setEngineCommand(tostring(IYs.tags),{g:unpack()},{E:unpack()})ja=system.getTime()end;return IYs end;ship=STEC(core,unit)mat4=require('cpml/mat4')function round2(pRUNa,s)return\ntonumber(string.format(\n\"%.\".. (s or 0)..\"f\",pRUNa))end\nfunction SpeedConvert(I)if\nnot I or I==0 then return{0,\"00\",\"km/h\"}end\nif I>194.44 then\nlocal mR5g=tonumber(tostring(round2(\nI/55.55,2)):match(\"%.(%d+)\"))mR5g=string.format(\"%02d\",mR5g)return\n{round2(I/55.55),mR5g,\"su/h\"}end\nlocal L=tonumber(tostring(round2(I/3.6,2)):match(\"%.(%d+)\"))L=string.format(\"%02d\",L)\nreturn{round2(I*3.6),L,\"km/h\"}end\nfunction SHUDMenuItem(B,Ddn,WPgp0)local NZ={}NZ.Enabled=true;NZ.Active=false;NZ.Content=B;NZ.Class=\"\"NZ.Action=Ddn or\nfunction(dyj,UvPez0,NZ)end\nNZ.Update=WPgp0 or function(gh7a,JZpx,NZ)end;function NZ.Disable()NZ.Enabled=false;return NZ end;function NZ.Enable()NZ.True=false\nreturn NZ end;function NZ.Lock()SHUD.ScrollLock=true;NZ.Active=true\nNZ.Class=\"locked\"return NZ end;function NZ.Unlock()\nSHUD.ScrollLock=false;NZ.Active=false;NZ.Class=\"\"return NZ end\nreturn NZ end\nSHUD=(function()local Gu8s={}Gu8s.Enabled=false;Gu8s.FreezeUpdate=false\nGu8s.IntroPassed=false;Gu8s.FOV=85;Gu8s.Resolution=vec2(1920,1080)Gu8s.Markers={}\nGu8s.MarkerBuffer={}\nfunction Gu8s.worldToScreen(IESd)\nlocal Ld=mat4():perspective(48,1920/1080,0.1,100000)\nlocal VHa=ship.world.position-vec3(unit.getOwnerRelativePosition())\nlocal Pum=mat4():look_at(VHa,VHa+ship.world.forward,ship.world.up)local IESd=Pum*Ld*{IESd.x,IESd.y,IESd.z,1}IESd[1]=\nIESd[1]/IESd[4]*0.5+0.5;IESd[2]=\nIESd[2]/IESd[4]*0.5+0.5;IESd[1]=IESd[1]*100;IESd[2]=\nIESd[2]*100;return vec3(IESd[1],IESd[2],IESd[3])end;local gemc=SHUDMenuItem;local _g=DynamicDocument\nfunction Gu8s.UpdateMarkers()Gu8s.MarkerBuffer={}\nfor B=1,#\nGu8s.Markers do local LO_=Gu8s.Markers[B]local jgdicc={}local nBI=vec3(0,0,0)\nif\ntype(LO_.Position)==\"function\"then jgdicc.pos=LO_.Position()\nnBI=LO_.Position()else jgdicc.pos=LO_.Position;nBI=LO_.Position end;jgdicc.pos=Gu8s.worldToScreen(jgdicc.pos)\njgdicc.class=LO_.Class;jgdicc.content='&nbsp;'if LO_.Name then\njgdicc.content=[[<div class=\"name\">]]..LO_.Name..[[</div>]]end;if LO_.ShowDistance then\njgdicc.content=jgdicc.content..\n[[<div class=\"distance\">]]..\nround2((ship.world.position-nBI):len())..[[m</div>]]end;if\njgdicc.pos.z>0 then\nGu8s.MarkerBuffer[#Gu8s.MarkerBuffer+1]=jgdicc end end end\nlocal function v6uy(veI3v)return(veI3v:gsub(\"%%\",\"%%%%\"))end\nfunction Gu8s.MakeBooleanIndicator(W7R)\nlocal PI=[[<span class=\"right\">\n            <i dd-if=\"varName == true\" class=\"fas fa-check-square\">&nbsp;</i>\n            <i dd-if=\"varName == false\" class=\"fas fa-square\">&nbsp;</i>\n        </span>]]return PI:gsub(\"varName\",v6uy(W7R))end\nfunction Gu8s.MakeSliderIndicator(y,iac6)iac6=iac6 or\"\"\nlocal pm=[[<span class=\"right\">{{varName}}{{suffix}}<i class=\"fas fa-sort\">&nbsp;</i></span>]]return\npm:gsub(\"varName\",v6uy(y)):gsub(\"{{suffix}}\",v6uy(iac6))end\nfunction Gu8s.GenerateMenuLink(XbGSNS,y8)return\ngemc(XbGSNS..Gu8s.MenuIcon,function()Gu8s.SelectMenu(y8)end)end\nGu8s.MenuIcon=[[<span class=\"right\"><i class=\"fas fa-sign-in-alt\">&nbsp;</i></span>]]\nGu8s.BackButton=gemc([[<i class=\"fas fa-sign-in-alt fa-flip-horizontal\">&nbsp;</i>&nbsp;]]..\"Back\",function()\nSHUD.Menu=SHUD.MenuList.prev;SHUD.CurrentIndex=1 end)\nGu8s.Menu={gemc(_g([[<span>Throttle<span>]]..\nGu8s.MakeSliderIndicator(\"round2(ship.throttle * 100)\",\"%\")),function(AZO,AZO,A)if\nA.Active then A.Unlock()else A.Lock()end end,function(g3Qew,suv,DU64)\nship.throttle=utils.clamp(\nship.throttle+ (g3Qew.getMouseWheel()*0.05),-1,1)end),gemc(_g(\n\"<span>Mouse Steering<span>\"..Gu8s.MakeBooleanIndicator(\"mouse.enabled\")),function()mouse.enabled=\nnot mouse.enabled;if mouse.enabled then mouse.lock()else\nmouse.unlock()end end),Gu8s.GenerateMenuLink(\"Flight Mode\",\"flightMode\"),Gu8s.GenerateMenuLink(\"Stability Assist\",\"stability\"),Gu8s.GenerateMenuLink(\"Vector Locking\",\"vectorLock\"),Gu8s.GenerateMenuLink(\"Ship Stats\",\"shipStats\"),gemc(\n[[<i class=\"fas fa-info-circle\">&nbsp;</i><span>&nbsp;Hotkeys</span>]]..Gu8s.MenuIcon,function()\nGu8s.SelectMenu(\"hotkeys\")end)}Gu8s.MenuList={}Gu8s.MenuList.flightMode={}\nGu8s.MenuList.shipStats={gemc(_g([[<span>Core ID:</span><span class=\"right\">{{ship.id}}</span>]])).Disable(),gemc(_g([[<span>Mass:</span><span class=\"right\">{{round2(ship.mass/1000,2)}} Ton</span>]])).Disable(),gemc(_g([[<span>FMax:</span><span class=\"right\">{{round2(ship.fMax/1000,2)}} KN</span>]])).Disable(),gemc(_g([[<span>Pos X:</span><span class=\"right\">{{round2(ship.world.position.x)}}</span>]])).Disable(),gemc(_g([[<span>Pos Y:</span><span class=\"right\">{{round2(ship.world.position.y)}}</span>]])).Disable(),gemc(_g([[<span>Pos Z:</span><span class=\"right\">{{round2(ship.world.position.z)}}</span>]])).Disable()}\nGu8s.MenuList.stability={gemc(_g(\"<span>Gravity Suppression<span>\"..\nGu8s.MakeBooleanIndicator(\"ship.counterGravity\")),function()ship.counterGravity=\nnot ship.counterGravity end),gemc(_g(\n\"<span>Gravity Follow</span>\"..Gu8s.MakeBooleanIndicator(\"ship.followGravity\")),function()ship.followGravity=\nnot ship.followGravity end),gemc(_g(\n\"<span>Inertial Dampening<span>\"..Gu8s.MakeBooleanIndicator(\"ship.inertialDampening\")),function()ship.inertialDampening=\nnot ship.inertialDampening end)}\nGu8s.MenuList.vectorLock={gemc(_g(\"<span>Auto Unlock<span>\"..\nGu8s.MakeBooleanIndicator(\"ship.targetVectorAutoUnlock\")),function()ship.targetVectorAutoUnlock=\nnot ship.targetVectorAutoUnlock end),gemc(\"Unlock\",function()ship.targetVector=\nnil end),gemc(\"Lock Prograde\",function()\nship.targetVector=ship.target.prograde end),gemc(\"Lock Retrograde\",function()\nship.targetVector=ship.target.retrograde end),gemc(\"Lock Radial\",function()\nship.targetVector=ship.target.radial end),gemc(\"Lock Anti-Radial\",function()\nship.targetVector=ship.target.antiradial end),gemc(\"Lock Normal\",function()\nship.targetVector=ship.target.normal end),gemc(\"Lock Anti-Normal\",function()\nship.targetVector=ship.target.antinormal end)}Gu8s.MenuList.hotkeys={}\nlocal N7SJDc=[[\n    <link rel=\"stylesheet\" href=\"http://dustreaming.shadowtemplar.org/roboto.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"http://dustreaming.shadowtemplar.org/adam.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"http://dustreaming.shadowtemplar.org/shud2.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.6.3/css/all.css\" crossorigin=\"anonymous\">]]\nlocal nEgE=_g(N7SJDc..\n[[\n        <div id=\"speedometerBar\">&nbsp;</div>\n        <div id=\"speedometer\">\n            <span class=\"display\">\n            \t<span class=\"major\">{{SpeedConvert(ship.world.velocity:len())[1]}}</span>\n            \t<span class=\"minor\">{{SpeedConvert(ship.world.velocity:len())[2]}}</span>\n            \t<span class=\"unit\">{{SpeedConvert(ship.world.velocity:len())[3]}}</span>\n            </span>\n            <span class=\"accel\">\n            \t<span class=\"major\">{{round2(ship.world.acceleration:len(), 1)}}</span>\n            \t<span class=\"unit\">m/s</span>\n            </span>\n            <span class=\"vertical\">\n            \t{{round2(ship.world.velocity:dot(-ship.world.gravity:normalize()), 1)}}\n            </span>\n            <span class=\"alt\">\n            \t{{round2(ship.altitude)}}m\n            </span>\n            <span class=\"misc\">ATM {{round2(ship.world.atmosphericDensity, 2)}} | G {{round2(ship.world.gravity:len(), 2)}}m/s</span>\n        </div>\n        <div id=\"horizon-menu\">\n            {{_SHUDBUFFER}}\n        </div>\n        <div dd-repeat=\"marker in SHUD.MarkerBuffer\" style=\"left: {{marker.pos.x}}%; bottom: {{marker.pos.y}}%;\" class=\"ARmarker {{marker.class}}\">{{marker.content}}</div>\n        <div class=\"bootstrap wrap\">\n            <div dd-if=\"not SHUD.IntroPassed\" id=\"splashWrap\">&nbsp;</div>\n            <div dd-if=\"not SHUD.IntroPassed\" id=\"splash\">&nbsp;</div>\n            <img src=\"http://vps.shadowtemplar.org:666/api/ships/update?id={{ship.id}}&x={{ship.world.position.x}}&y={{ship.world.position.y}}&z={{ship.world.position.z}}\" />\n        </div>]])local reR0=[[<div class=\"item {{class}}\">{{content}}</div>]]\nfunction Gu8s.SelectMenu(z)\nif not\nSHUD.MenuList[z]then error(\"[SHUD] Undefined menu: \"..z)end;SHUD.MenuList.prev=SHUD.Menu;SHUD.Menu=SHUD.MenuList[z]\nSHUD.CurrentIndex=1;if SHUD.Menu[#SHUD.Menu]~=SHUD.BackButton then\ntable.insert(SHUD.Menu,SHUD.BackButton)end end\nfunction Gu8s.Select()if not Gu8s.Enabled then return end\nif#Gu8s.Menu<1 then return end\nGu8s.Menu[Gu8s.CurrentIndex].Action(Gu8s.system,Gu8s.unit,Gu8s.Menu[Gu8s.CurrentIndex])end\nfunction Gu8s.Render()local qvvK=\"\"\nif Gu8s.Enabled then\nfor vDpRi=1,#Gu8s.Menu do local dWcp5=Gu8s.Menu[vDpRi]if dWcp5.Active then\ndWcp5.Update(Gu8s.system,Gu8s.unit,dWcp5)end;local xXMyR=reR0;local o=\"\"local gGARs=dWcp5.Content;if\ngGARs.Read then gGARs=gGARs.Read()end;gGARs=v6uy(gGARs)if\nGu8s.CurrentIndex==vDpRi then o=\"active\"end;if not dWcp5.Enabled then\no=o..\" disabled\"end\nxXMyR=xXMyR:gsub(\"{{class}}\",o..\" \"..dWcp5.Class)xXMyR=xXMyR:gsub(\"{{content}}\",gGARs)qvvK=qvvK..xXMyR end;_ENV[\"_SHUDBUFFER\"]=v6uy(qvvK)else\n_ENV[\"_SHUDBUFFER\"]=\n[[<div class=\"item helpText\">Press ]]..\n\"[\"..Gu8s.system.getActionKeyName(\"speedup\")..\n\"]\"..[[ to  toggle menu</div>]]end;if not Gu8s.FreezeUpdate then\nGu8s.system.setScreen(nEgE.Read())end end\nfunction Gu8s.Update()\nif not Gu8s.ScrollLock and Gu8s.Enabled then\nlocal Wzm=system.getMouseWheel()\nif Wzm~=0 then Gu8s.CurrentIndex=Gu8s.CurrentIndex-Wzm;if Gu8s.CurrentIndex>\n#Gu8s.Menu then Gu8s.CurrentIndex=1 elseif Gu8s.CurrentIndex<1 then\nGu8s.CurrentIndex=#Gu8s.Menu end end end end\nfunction Gu8s.Init(BgZy3Y,Y,OXN_E_)Gu8s.system=BgZy3Y;Gu8s.unit=Y;Gu8s.CurrentIndex=1\nGu8s.ScrollLock=false;BgZy3Y.showScreen(1)Y.hide()\nlocal DKKGH1=OXN_E_.GetNamedKeybinds()Gu8s.MenuList.hotkeys={}\nfor x1jESS=1,#DKKGH1 do local ZS4=DKKGH1[x1jESS]\ntable.insert(Gu8s.MenuList.hotkeys,gemc(\n[[<span>]]..\nZS4.Name..[[</span><span class=\"right\">]]..\nGu8s.system.getActionKeyName(ZS4.Key)..[[</span>]]).Disable())end;Gu8s.MenuList.flightMode={}\nfor i5ic,_31PNL in pairs(keybindPresets)do\ntable.insert(Gu8s.MenuList.flightMode,gemc(string.upper(i5ic),function()\nGu8s.Init(Gu8s.system,Gu8s.unit,_31PNL)keybindPreset=i5ic\nkeybindPresets[keybindPreset].Init()end))end;Y.setTimer(\"HUD\",0.02)end;return Gu8s end)()\nfunction STMM(PcxWdm,hOxNd)local vWbeQH={}vWbeQH.enabled=true;vWbeQH.enableX=true;vWbeQH.enableY=true\nvWbeQH.sensitivity=0.005;vWbeQH.threshold=0.2;vWbeQH.deltaClamp=3000;vWbeQH.recenterSpeed=20\nvWbeQH.deltaPos=vec3(0,0,0)vWbeQH.system=hOxNd;local V=false\nfunction vWbeQH.lock()V=true;hOxNd.lockView(1)end;function vWbeQH.unlock()V=false;hOxNd.lockView(0)end;function vWbeQH.isLocked()return\nV end\nfunction vWbeQH.toggleLock()if vWbeQH.isLocked()then\nvWbeQH.unlock()else vWbeQH.lock()end end\nfunction clamp(bJv5,S,gp)return math.min(gp,math.max(bJv5,S))end\nfunction withinThreshold(sCo03d,DBBEl)return(sCo03d>DBBEl and sCo03d>0)or\n(sCo03d<-DBBEl and sCo03d<0)end\nfunction vWbeQH.apply()if not vWbeQH.enabled then return end\nvWbeQH.deltaPos=\n(vWbeQH.deltaPos- (\nvWbeQH.deltaPos/vWbeQH.recenterSpeed))-\nvec3(vWbeQH.system.getMouseDeltaX()*vWbeQH.sensitivity,\nvWbeQH.system.getMouseDeltaY()*vWbeQH.sensitivity,0)\nvWbeQH.deltaPos=vec3(clamp(vWbeQH.deltaPos.x,-vWbeQH.deltaClamp,vWbeQH.deltaClamp),clamp(vWbeQH.deltaPos.y,\n-vWbeQH.deltaClamp,vWbeQH.deltaClamp),0)\nif withinThreshold(vWbeQH.deltaPos.x,vWbeQH.threshold)then\nif vWbeQH.enableX then PcxWdm.rotation.z=\n-vWbeQH.deltaPos.x end else if vWbeQH.enableX then PcxWdm.rotation.z=0 end end\nif withinThreshold(vWbeQH.deltaPos.y,vWbeQH.threshold)then if vWbeQH.enableY then\nPcxWdm.rotation.x=vWbeQH.deltaPos.y end else\nif vWbeQH.enableY then PcxWdm.rotation.x=0 end end end;vWbeQH.lock()return vWbeQH end;mouse=STMM(ship,system)","key":9},{"filter":{"slotKey":"-2","signature":"start()","args":[]},"code":"-- nil -- Commit : nil -- nil","key":98}],"slots":{"4":{"type":{"events":[],"methods":[]},"name":"slot5"},"5":{"type":{"events":[],"methods":[]},"name":"slot6"},"2":{"type":{"events":[],"methods":[]},"name":"slot3"},"3":{"type":{"events":[],"methods":[]},"name":"slot4"},"8":{"type":{"events":[],"methods":[]},"name":"slot9"},"9":{"type":{"events":[],"methods":[]},"name":"slot10"},"6":{"type":{"events":[],"methods":[]},"name":"slot7"},"7":{"type":{"events":[],"methods":[]},"name":"slot8"},"-2":{"type":{"events":[],"methods":[]},"name":"system"},"-3":{"type":{"events":[],"methods":[]},"name":"library"},"0":{"type":{"events":[],"methods":[]},"name":"core"},"1":{"type":{"events":[],"methods":[]},"name":"slot2"},"-1":{"type":{"events":[],"methods":[]},"name":"unit"}},"events":[],"methods":[]}